<template lang="html">
    <div id="comment" >
        <header-common :title="viewTitle" :iconType="iconType" :rightParams="rightParams"></header-common>
        <div class="commentWrap">
            <textarea class="init" placeholder="亲，您的评价对其他买家有很大帮助" v-model="commTxt"></textarea>
            <div class="grade">
                <div class="list">客服服务
                    <div class="gradeNode">
                        <i class="iconfont icon-xing" :class="{'sel': grade1 >= 1}" @click="setGrade1(1)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade1 >= 2}" @click="setGrade1(2)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade1 >= 3}" @click="setGrade1(3)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade1 >= 4}" @click="setGrade1(4)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade1 >= 5}" @click="setGrade1(5)"></i>
                    </div>
                </div>
                <div class="list">产品质量
                    <div class="gradeNode">
                        <i class="iconfont icon-xing" :class="{'sel': grade2 >= 1}" @click="setGrade2(1)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade2 >= 2}" @click="setGrade2(2)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade2 >= 3}" @click="setGrade2(3)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade2 >= 4}" @click="setGrade2(4)"></i>
                        <i class="iconfont icon-xing" :class="{'sel': grade2 >= 5}" @click="setGrade2(5)"></i>
                    </div>
                </div>
                <div class="list">技师服务
                    <div class="gradeNode">
                        <i class="iconfont icon-xing " :class="{'sel': grade3 >= 1}" @click="setGrade3(1)"></i>
                        <i class="iconfont icon-xing " :class="{'sel': grade3 >= 2}" @click="setGrade3(2)"></i>
                        <i class="iconfont icon-xing " :class="{'sel': grade3 >= 3}" @click="setGrade3(3)"></i>
                        <i class="iconfont icon-xing " :class="{'sel': grade3 >= 4}" @click="setGrade3(4)"></i>
                        <i class="iconfont icon-xing " :class="{'sel': grade3 >= 5}" @click="setGrade3(5)"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="btnWrap">
            <button @click="sub">提交</button>
        </div>
    </div>
</template>

<script  type="text/ecmascript-6">
import headerCommon from 'components/header/headerCommon.vue'
import ajax from './../vueResource.ajax.js'

export default {
    data () {
        return {
            viewTitle: '评论',
            iconType: 'icon-fanhui',
            rightParams: {},
            grade1: 0,
            grade2: 0,
            grade3: 0,
            commTxt: ''
        }
    },
    components: {
        'header-common': headerCommon
    },
    created () {
    },
    methods: {
        setGrade1 (val) {
            this.grade1 = val
        },
        setGrade2 (val) {
            this.grade2 = val
        },
        setGrade3 (val) {
            this.grade3 = val
        },
        sub () {
            var params = {
                "orderId": this.$route.query.id,
                "reviewText": this.commTxt,
                "customerServiceRating": this.grade1,
                "serviceProductRating": this.grade2,
                "storeRating": this.grade3
            }
            ajax.ajax({
                'vue': this,
                'port': 'SubmitReview',
                'type': 'post',
                'req_params': params,
                'statusOk': function (res, v) {
                    console.log(res.data.data)
                    window.$.PageDialog.ok('评论成功')
                    v.$router.back()
                 },
                'statusError': function (res, v) {
                }
            })
        }
    },
    beforeCreate () {
        this.$store.commit('hideFoot')
    }
}
</script>

<style lang="stylus" rel="stylesheet/stylus">
#comment
    .commentWrap
        padding-top:55px
        .init
            display:block
            width:98%
            border:none
            height:200px
            padding:5px 1%
        .grade
            margin-top:10px
            background-color:#fff
            border-bottom:1px solid #ddd
            .list
                overflow:hidden
                line-height:50px
                margin-left:10px
                color:#666
                border-bottom:1px solid #ddd
                &:last-child
                    border:none
                .gradeNode
                    float:right
                    padding-right:10px
                    font-size:20px
                    color:#999
                .sel
                    color:#c7a770
    .btnWrap
        position: fixed
        bottom: 0
        width: 100%
        background-color: #fff
        z-index: 2
        button
            width: 94%
            margin: 20px 3% 10px 3%
            background-color: #c7a770
            height: 44px
            line-height: 44px
            color: #fff
            border: none
            font-size: 18px



</style>
