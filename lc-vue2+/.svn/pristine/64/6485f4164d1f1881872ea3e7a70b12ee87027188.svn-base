<template lang="html">
    <div class="message" >
        <div class="write-space"></div>
        <header-common :title="viewTitle" :iconType="iconType" :rightParams="rightParams"></header-common>
        <div class="content">
            <div class="scrollBar" ref="scrollBar">
                <div class="listWrap"  v-infinite-scroll="loadMore" infinite-scroll-disabled="loading" infinite-scroll-distance="10">
                    <div class="list" @click="dotoDetail(1)">
                        <p class="tt iconfont icon-neibuyoujian">服务器升级维护通告</p>
                        <p class="tm">2016-08-16</p>
                        <p class="desc">亲爱的用户：<br>为了给大家提供更好的服务，我们将于12月-14号凌晨..................................</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script  type="text/ecmascript-6">
import Bscroll from 'better-scroll'
import headerCommon from 'components/header/headerCommon.vue'

export default {
    data () {
        return {
            viewTitle: '我的消息',
            iconType: 'icon-fanhui',
            rightParams: {}
        }
    },
    components: {
        'header-common': headerCommon
    },
    created () {
        this.$store.commit('hideFoot')
        this.$nextTick(function () {
            this._initScroll()
        })
    },
    methods: {
        _initScroll () {
            this.viewScroll = new Bscroll(this.$refs.scrollBar, {
                click: true,
                scrollY: true
            })
        },
        dotoDetail (id) {
            this.$store.commit('showFoot')
            this.$router.push('/message/' + id)
        },
        loadMore () {
        }
    },
    beforeCreate () {
        this.$store.commit('hideFoot')
    }
    // beforeDestroy () {
    //     this.$store.commit('showFoot')
    // }
}
</script>

<style lang="stylus" rel="stylesheet/stylus">
    .message
        position:absolute
        width:100%
        height:100%
        .content
            position:absolute
            top:45px
            bottom:0
            padding:10px 0
            background-color:#eee
            .scrollBar
                height:100%
                .list
                    border-radius:10px
                    background-color:#fff
                    height:135px
                    width:90%
                    margin: 5px auto 10px auto
                    p
                        padding:0 0 0 5%
                    .tt
                        height:40px
                        line-height:40px
                        font-size:18px
                        color:#000
                        overflow:hidden
                        position:relative
                        &:before
                            position:absolute
                            right:20px
                            font-size:28px
                            top:6px
                            color:#dab96e
                    .tm
                        font-size:15px
                        color:#999
                    .desc
                        border-top:1px solid #ddd
                        padding-left:0
                        padding-top:7px
                        margin:10px 5% 0 5%
                        height:50px
                        line-height:25px
                        color:#999
                        overflow:hidden


</style>
