<template lang="html">
    <!--  设置 -->
    <div id="setting">
        <header-common :title="viewTitle" :iconType="iconType" :rightParams="rightParams"></header-common>
        <div class="settingWrap">
            <div class="info">
                <div class="iconfont icon-chevron-copy-copy-copy-copy-copy-copy" @click="$router.push('/user/changePassword')"><label>修改密码</label></div>
            </div>
            <div class="info">
                <div class="iconfont icon-chevron-copy-copy-copy-copy-copy-copy" @click="clearCache"><label>清除缓存</label></div>
                <div class="iconfont icon-chevron-copy-copy-copy-copy-copy-copy"><label>版本更新</label></div>
                <div class="iconfont icon-chevron-copy-copy-copy-copy-copy-copy"><label>关于我们</label> </div>
            </div>
            <div class="info">
                <div class="" @click="onLogout"><span>退出当前账号</span></div>
            </div>
        </div>
    </div>

</template>

<script>
import headerCommon from '../../components/header/headerCommon.vue'
import { Toast } from 'mint-ui'
import ajax from './../../vueResource.ajax.js'

export default {
    data () {
        return {
            viewTitle: '设置',
            iconType: 'icon-fanhui',
            rightParams: {}
        }
    },
    components: {
        'header-common': headerCommon
    },
    beforeCreate () {
        this.$store.commit('hideFoot')
    },
    methods: {
        onLogout () {
            window.localStorage.clear()
            this.$store.state.userToken = ''
            this.$store.state.userName = ''
            Toast('当前账号已退出登录')
            this.$router.push('/index')
        },
        clearCache () {
            if(this.userAgent() === "android"){
                var clean = myJsObj.cleanCache()
                // window.alert(clean)
            }else if(this.userAgent() === "ios"){
                window.webkit.messageHandlers.HybridKit.postMessage({"method": "clearCache"});
            }else{

            }
        },
        userAgent() {
            var ua = navigator.userAgent.toLowerCase()
            var _ua = ""
            if (/iphone|ipad|ipod/.test(ua)) {
                _ua = "ios"
            } else if (/android/.test(ua)) {
                _ua = "android"
            }else{
                _ua = "web"
            }
            return _ua
        }
    }
}
</script>

<style lang="stylus" rel="stylesheet/stylus">
#setting
    .settingWrap
        margin-top:55px
        .info
            margin-top:15px
            width:100%
            background-color:#fff
            border-bottom:1px solid #ddd
            div
                height:45px
                line-height:45px
                margin-left:10px
                border-bottom:1px solid #ddd
                position:relative
                &:last-child
                    border-bottom:none
                &:before
                    position:absolute
                    right:10px
                    color:#999
                label
                    display:inline-block
                    width:33%
                    color:#999
                input
                    display:inline-block
                    width:60%
                    height:44px
                span
                    text-align:center
                    display:block
                    margin-right:10px
                    color:#daba70
</style>
